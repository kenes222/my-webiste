<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
    <title>{% block title %}My Site{% endblock %}</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        </div>
    </nav>
    <div class="container mt-4">
        {% block content %}{% endblock %}
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        console.log("Geolocation is not supported by this browser.");
      }
    }
  
    function showPosition(position) {
      var latitude = position.coords.latitude;
      var longitude = position.coords.longitude;
      sendLocationToServer(latitude, longitude);
    }
  
    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          console.log("User denied the request for Geolocation.");
          break;
        case error.POSITION_UNAVAILABLE:
          console.log("Location information is unavailable.");
          break;
        case error.TIMEOUT:
          console.log("The request to get user location timed out.");
          break;
        case error.UNKNOWN_ERROR:
          console.log("An unknown error occurred.");
          break;
      }
    }
  
    function sendLocationToServer(latitude, longitude) {
      fetch('/save_location/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': '{{ csrf_token }}'
        },
        body: JSON.stringify({ latitude: latitude, longitude: longitude })
      })
      .then(response => response.json())
      .then(data => {
        console.log('Success:', data);
      })
      .catch((error) => {
        console.error('Error:', error);
      });
    }
  
    window.onload = getLocation;
</script>
</html>
<style>
  .photo-carousel {
      position: relative;
      width: 100%;
      max-width: 600px;
      margin: auto;
  }
  
  .carousel-wrapper {
      position: relative;
      overflow: hidden;
      width: 100%;
      height: 400px; /* Fixed height for the image window */
  }
  
  .carousel-container {
      display: flex;
      transition: transform 0.5s ease;
      height: 100%;
  }
  
  .carousel-slide {
      display: none;
      flex: 0 0 100%;
      justify-content: center;
      align-items: center;
      text-align: center;
  }
  
  .carousel-slide img {
      width: 100%;
      height: 100%;
      object-fit: contain; /* Fit the image within the window without changing the window size */
  }
  
  .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      width: auto;
      margin-top: -22px;
      padding: 16px;
      color: white;
      font-weight: bold;
      font-size: 18px;
      transition: 0.6s ease;
      border-radius: 0 3px 3px 0;
      user-select: none;
  }
  
  .next {
      right: 0;
      border-radius: 3px 0 0 3px;
  }
  
  .prev:hover, .next:hover {
      background-color: rgba(0,0,0,0.8);
  }
  
  /* Hide the arrows if there's only one photo */
  .photo-carousel .prev, .photo-carousel .next {
      display: block;
  }
  </style>
  